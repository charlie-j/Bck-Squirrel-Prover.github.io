<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">

  <title>Squirrel Prover - Squirrel Prover</title>
  
  <link rel="stylesheet" href="style.css">
</head>

<body onkeydown="key(event)">
<span style="display: none;"><span class="squirrel-step" id="step0">
<span class="input-line" id="in0">set postQuantumSound=true.</span>
<span class="output-line" id="out0"></span>
<span class="com-line" id="com0"><hr />
<p>LAK WITH PAIRS AND TAGS</p>
<p>[D] Lucca Hirschi, David Baelde, and Stéphanie Delaune. A method for unbounded verification of privacy-type properties. Journal of Computer Security, 27(3):277–342, 2019.</p>
<p>R –&gt; T : nR T –&gt; R : &lt;nT,h(&lt;&lt;nR,nT&gt;,tag1&gt;,k)&gt; R –&gt; T : h(&lt;&lt;h(&lt;&lt;nR,nT&gt;,tag1&gt;,k),nR&gt;,tag2&gt;,k)</p>
<p>We consider tags in the messages (tag1 and tag2) to ease the proof.</p>
<p>This is a “light” model without the last check of T. ******************************************************************************</p>
</span>
</span>

<span class="squirrel-step" id="step1">
<span class="input-line" id="in1"><br><br>hash h<br><br>abstract ok : message<br>abstract ko : message<br><br>abstract tag1 : message<br>abstract tag2 : message<br><br>name key : index-&gt;message<br>name key': index-&gt;index-&gt;message<br><br>channel cT<br>channel cR<br><br>process tag(i,j:index) =<br>  new nT;<br>  in(cR,nR);<br>  let m2 = h(&lt;&lt;nR,nT&gt;,tag1&gt;,diff(key(i),key'(i,j))) in<br>  out(cT,&lt;nT,m2&gt;)<br><br>process reader =<br>  new nR;<br>  out(cR,nR);<br>  in(cT,x);<br>  if exists (i,k:index),<br>     snd(x) = h(&lt;&lt;nR,fst(x)&gt;,tag1&gt;,diff(key(i),key'(i,k)))<br>  then<br>    out(cR, try find i,k such that<br>              snd(x) = h(&lt;&lt;nR,fst(x)&gt;,tag1&gt;,diff(key(i),key'(i,k)))<br>            in<br>              h(&lt;&lt;snd(x),nR&gt;,tag2&gt;,diff(key(i),key'(i,k))))<br>  else<br>    out(cR,ko)<br><br>system ((!_k R: reader) | (!_i !_j T: tag(i,j))).</span>
<span class="output-line" id="out1">System before processing:<br>  <br>  (!_k R: <span class="pn" style="font-weight:bold; color: #0000AA">reader</span> ) | (!_i !_j T: <span class="pn" style="font-weight:bold; color: #0000AA">tag</span> i j)<br><br>System after processing:<br>  <br>  (!_k<br>     R:<br>     <span class="pio" style="font-weight: bold">out</span>(<span class="pc">cR</span>,nR(k));<br>     <span class="pio" style="font-weight: bold">in</span>(<span class="pc">cT</span>,<span class="pv" style="font-weight: bold; color: #AA00AA">x</span>);<br>     <span class="pc" style="text-decoration: underline; color: #AA0000">if</span> <span>exists</span> (i,k:index),<br>        (snd(x) = h(pair(pair(nR(k),fst(x)),tag1),<span>diff</span>(key(i),key'(i,k)))) <span class="pc" style="text-decoration: underline; color: #AA0000">then</span><br>       R1:<br>       <span class="pio" style="font-weight: bold">out</span>(<span class="pc">cR</span>,<br>       <span>try find</span> i,k:index <span>such that</span><br>       (snd(x) = h(pair(pair(nR(k),fst(x)),tag1),<span>diff</span>(key(i),key'(i,k)))) <span>in</span><br>       h(pair(pair(snd(x),nR(k)),tag2),<span>diff</span>(key(i),key'(i,k))) <span>else</span> zero);<br>       <span class="pn" style="font-weight:bold; color: #0000AA">null</span> <span class="pc" style="text-decoration: underline; color: #AA0000">else</span> R2: <span class="pio" style="font-weight: bold">out</span>(<span class="pc">cR</span>,ko); <span class="pn" style="font-weight:bold; color: #0000AA">null</span>) |<br>  (!_i<br>     !_j<br>       <span class="pio" style="font-weight: bold">in</span>(<span class="pc">cR</span>,<span class="pv" style="font-weight: bold; color: #AA00AA">nR</span>);<br>       <span class="pk" style="font-weight: bold">let</span> <span class="pv" style="font-weight: bold; color: #AA00AA">m2</span> = h(pair(pair(nR,nT(i,j)),tag1),<span>diff</span>(key(i),key'(i,j))) <span class="pk" style="font-weight: bold">in</span><br>       T: <span class="pio" style="font-weight: bold">out</span>(<span class="pc">cT</span>,pair(nT(i,j),m2(i,j))); <span class="pn" style="font-weight:bold; color: #0000AA">null</span>)<br><br>System default registered with actions (init,R,R1,R2,T).<br></span>
</span>

<span class="squirrel-step" id="step2">
<span class="input-line" id="in2"><br><br>include Basic.</span>
<span class="output-line" id="out2">Goal eq_sym :<br>  (x = y) = (y = x)<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(x = y) = (y = x)<br><br>[&gt; Line 11: by (rewrite ...) <br>[goal&gt; Goal eq_sym is proved <br>Exiting proof mode.<br><br><br>Goal neq_sym :<br>  (x &lt;&gt; y) = (y &lt;&gt; x)<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(x &lt;&gt; y) = (y &lt;&gt; x)<br><br>[&gt; Line 14: by (rewrite ...) <br>[goal&gt; Goal neq_sym is proved <br>Exiting proof mode.<br><br><br>Goal eq_refl :<br>  (x = x) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(x = x) = true<br><br>[&gt; Line 18: by (rewrite ...) <br>[goal&gt; Goal eq_refl is proved <br>Exiting proof mode.<br><br><br>Goal false_true :<br>  (false = true) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(false = true) = false<br><br>[&gt; Line 30: by (rewrite ...) <br>[goal&gt; Goal false_true is proved <br>Exiting proof mode.<br><br><br>Goal eq_true :<br>  (b = true) = b<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(b = true) = b<br><br>[&gt; Line 35: by (case b) <br>[goal&gt; Goal eq_true is proved <br>Exiting proof mode.<br><br><br>Goal eq_true2 :<br>  (true = b) = b<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(true = b) = b<br><br>[&gt; Line 39: by (case b) <br>[goal&gt; Goal eq_true2 is proved <br>Exiting proof mode.<br><br><br>Goal not_not :<br>  not(not(b)) = b<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not(not(b)) = b<br><br>[&gt; Line 54: by (case b) <br>[goal&gt; Goal not_not is proved <br>Exiting proof mode.<br><br><br>Goal not_eq :<br>  not(x = y) = (x &lt;&gt; y)<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not(x = y) = (x &lt;&gt; y)<br><br>[&gt; Line 60: by (rewrite ...) <br>[goal&gt; Goal not_eq is proved <br>Exiting proof mode.<br><br><br>Goal not_neq :<br>  not(x &lt;&gt; y) = (x = y)<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not(x &lt;&gt; y) = (x = y)<br><br>[&gt; Line 66: by (rewrite ...) <br>[goal&gt; Goal not_neq is proved <br>Exiting proof mode.<br><br><br>Goal not_eqfalse :<br>  (b = false) = not(b)<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(b = false) = not(b)<br><br>[&gt; Line 72: by (case b) <br>[goal&gt; Goal not_eqfalse is proved <br>Exiting proof mode.<br><br><br>Goal eq_false :<br>  ((x = y) = false) = (x &lt;&gt; y)<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>((x = y) = false) = (x &lt;&gt; y)<br><br>[&gt; Line 80: (rewrite ...) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>((x = y) = false) = not(x = y)<br><br>[&gt; Line 80: ((case (x = y));(intro _)) <br>[goal&gt; Focused goal (1/2):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br>_: x = y<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(true = false) = not(true)<br><br>[&gt; Line 80: simpl <br>[goal&gt; Focused goal (1/2):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br>_: x = y<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>true<br><br>[&gt; Line 80: auto <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br>_: not(x = y)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(false = false) = not(false)<br><br>[&gt; Line 81: by (rewrite ...) <br>[goal&gt; Goal eq_false is proved <br>Exiting proof mode.<br><br><br>Goal and_true_r :<br>  (b &amp;&amp; true) = b<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(b &amp;&amp; true) = b<br><br>[&gt; Line 94: by (rewrite ... ...) <br>[goal&gt; Goal and_true_r is proved <br>Exiting proof mode.<br><br><br>Goal and_false_r :<br>  (b &amp;&amp; false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(b &amp;&amp; false) = false<br><br>[&gt; Line 101: by (rewrite ... ...) <br>[goal&gt; Goal and_false_r is proved <br>Exiting proof mode.<br><br><br>Goal or_false_r :<br>  (b || false) = b<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(b || false) = b<br><br>[&gt; Line 112: by (rewrite ... ...) <br>[goal&gt; Goal or_false_r is proved <br>Exiting proof mode.<br><br><br>Goal or_true_r :<br>  (b || true) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(b || true) = true<br><br>[&gt; Line 119: by (rewrite ... ...) <br>[goal&gt; Goal or_true_r is proved <br>Exiting proof mode.<br><br><br>Goal not_and :<br>  not((a &amp;&amp; b)) = (not(a) || not(b))<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: a,b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not((a &amp;&amp; b)) = (not(a) || not(b))<br><br>[&gt; Line 128: (rewrite ...) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: a,b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not((a &amp;&amp; b)) &lt;=&gt; not(a) || not(b)<br><br>[&gt; Line 129: (((case a);(case b));(intro //=)) <br>[goal&gt; Goal not_and is proved <br>Exiting proof mode.<br><br><br>Goal not_or :<br>  not((a || b)) = (not(a) &amp;&amp; not(b))<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: a,b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not((a || b)) = (not(a) &amp;&amp; not(b))<br><br>[&gt; Line 134: (rewrite ...) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: a,b:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not((a || b)) &lt;=&gt; not(a) &amp;&amp; not(b)<br><br>[&gt; Line 135: (((case a);(case b));(intro //=)) <br>[goal&gt; Goal not_or is proved <br>Exiting proof mode.<br><br><br>Goal if_true :<br>  b =&gt; if b then x else y = x<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>b =&gt; if b then x else y = x<br><br>[&gt; Line 144: (intro *) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br>H: b<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if b then x else y = x<br><br>[&gt; Line 145: (case <span>if</span> b <span>then</span> x <span>else</span> y) <br>[goal&gt; Focused goal (1/2):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br>H: b<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>b &amp;&amp; if b then x else y = x =&gt; x = x<br><br>[&gt; Line 146: auto <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br>H: b<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not(b) &amp;&amp; if b then x else y = y =&gt; y = x<br><br>[&gt; Line 147: (intro [HH _]) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br>H: b<br>HH: not(b)<br>_: if b then x else y = y<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>y = x<br><br>[&gt; Line 147: by (have ... as ) <br>[goal&gt; Goal if_true is proved <br>Exiting proof mode.<br><br><br>Goal if_true0 :<br>  if true then x else y = x<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if true then x else y = x<br><br>[&gt; Line 153: by (rewrite ...) <br>[goal&gt; Goal if_true0 is proved <br>Exiting proof mode.<br><br><br>Goal if_false :<br>  not(b) =&gt; if b then x else y = y<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not(b) =&gt; if b then x else y = y<br><br>[&gt; Line 160: ((intro *);(case <span>if</span> b <span>then</span> x <span>else</span> y)) <br>[goal&gt; Focused goal (1/2):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br>H: not(b)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>b &amp;&amp; if b then x else y = x =&gt; x = y<br><br>[&gt; Line 161: (intro [HH _]) <br>[goal&gt; Focused goal (1/2):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br>H: not(b)<br>HH: b<br>_: if b then x else y = x<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>x = y<br><br>[&gt; Line 161: by (have ... as ) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x,y:'a<br>H: not(b)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not(b) &amp;&amp; if b then x else y = y =&gt; y = y<br><br>[&gt; Line 162: auto <br>[goal&gt; Goal if_false is proved <br>Exiting proof mode.<br><br><br>Goal if_false0 :<br>  if false then x else y = y<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if false then x else y = y<br><br>[&gt; Line 168: by (rewrite ...) <br>[goal&gt; Goal if_false0 is proved <br>Exiting proof mode.<br><br><br>Goal if_then_then :<br>  if b then if b' then x else y else y = if (b &amp;&amp; b') then x else y<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if b then if b' then x else y else y = if (b &amp;&amp; b') then x else y<br><br>[&gt; Line 175: by ((case b);(case b')) <br>[goal&gt; Goal if_then_then is proved <br>Exiting proof mode.<br><br><br>Goal if_then_implies :<br>  if b then if b' then x else y else z =<br>  if b then if (b =&gt; b') then x else y else z<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if b then if b' then x else y else z =<br>if b then if (b =&gt; b') then x else y else z<br><br>[&gt; Line 182: ((case b);<br>             ((intro H);((case b');((intro H');(simpl;(try auto))))))<br><br>[goal&gt; Focused goal (1/2):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br>H: b<br>H': b'<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>x = if (true =&gt; true) then x else y<br><br>[&gt; Line 183: by (rewrite ...) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br>H: b<br>H': not(b')<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>y = if (true =&gt; false) then x else y<br><br>[&gt; Line 184: (rewrite ...) <br>[goal&gt; Focused goal (1/2):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br>H: b<br>H': not(b')<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>not((true =&gt; false))<br><br>[&gt; Line 185: ((intro Habs);by (have ... as )) <br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br>H: b<br>H': not(b')<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>y = y<br><br>[&gt; Line 186: auto <br>[goal&gt; Goal if_then_implies is proved <br>Exiting proof mode.<br><br><br>Goal if_same :<br>  if b then x else x = x<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b:bool,x:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if b then x else x = x<br><br>[&gt; Line 192: by (case b) <br>[goal&gt; Goal if_same is proved <br>Exiting proof mode.<br><br><br>Goal if_then :<br>  b = b' =&gt; if b then if b' then x else y else z = if b then x else z<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>b = b' =&gt; if b then if b' then x else y else z = if b then x else z<br><br>[&gt; Line 201: by ((intro -&gt;);(case b')) <br>[goal&gt; Goal if_then is proved <br>Exiting proof mode.<br><br><br>Goal if_else :<br>  b = b' =&gt; if b then x else if b' then y else z = if b then x else z<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>b = b' =&gt; if b then x else if b' then y else z = if b then x else z<br><br>[&gt; Line 210: by ((intro -&gt;);(case b')) <br>[goal&gt; Goal if_else is proved <br>Exiting proof mode.<br><br><br>Goal if_then_not :<br>  b = not(b') =&gt; if b then if b' then x else y else z = if b then y else z<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>b = not(b') =&gt; if b then if b' then x else y else z = if b then y else z<br><br>[&gt; Line 219: by ((intro -&gt;);(case b')) <br>[goal&gt; Goal if_then_not is proved <br>Exiting proof mode.<br><br><br>Goal if_else_not :<br>  b = not(b') =&gt; if b then x else if b' then y else z = if b then x else y<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br>Variables: b,b':bool,x,y,z:'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>b = not(b') =&gt; if b then x else if b' then y else z = if b then x else y<br><br>[&gt; Line 228: by ((intro -&gt;);(case b')) <br>[goal&gt; Goal if_else_not is proved <br>Exiting proof mode.<br><br><br>Goal fst_pair :<br>  <span class="gf" style="font-weight: bold">fst</span>(&lt;x,y&gt;) = x<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: x,y:message<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gf" style="font-weight: bold">fst</span>(&lt;x,y&gt;) = x<br><br>[&gt; Line 236: auto <br>[goal&gt; Goal fst_pair is proved <br>Exiting proof mode.<br><br><br>Goal snd_pair :<br>  <span class="gf" style="font-weight: bold">snd</span>(&lt;x,y&gt;) = y<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: x,y:message<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gf" style="font-weight: bold">snd</span>(&lt;x,y&gt;) = y<br><br>[&gt; Line 240: auto <br>[goal&gt; Goal snd_pair is proved <br>Exiting proof mode.<br><br><br>Goal iff_refl :<br>  (x &lt;=&gt; x) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: x:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(x &lt;=&gt; x) = true<br><br>[&gt; Line 248: by (rewrite ...) <br>[goal&gt; Goal iff_refl is proved <br>Exiting proof mode.<br><br><br>Goal iff_sym :<br>  (x &lt;=&gt; y) = (y &lt;=&gt; x)<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Variables: x,y:bool<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(x &lt;=&gt; y) = (y &lt;=&gt; x)<br><br>[&gt; Line 254: by (rewrite ...) <br>[goal&gt; Goal iff_sym is proved <br>Exiting proof mode.<br><br><br>Goal true_iff_false :<br>  (true &lt;=&gt; false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(true &lt;=&gt; false) = false<br><br>[&gt; Line 259: by (rewrite ...) <br>[goal&gt; Goal true_iff_false is proved <br>Exiting proof mode.<br><br><br>Goal false_iff_true :<br>  (false &lt;=&gt; true) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(false &lt;=&gt; true) = false<br><br>[&gt; Line 265: by (rewrite ...) <br>[goal&gt; Goal false_iff_true is proved <br>Exiting proof mode.<br><br><br>Goal exists_false1 :<br>  (exists (a:'a), false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (a:'a), false) = false<br><br>[&gt; Line 277: by (rewrite ...) <br>[goal&gt; Goal exists_false1 is proved <br>Exiting proof mode.<br><br><br>Goal exists_false2 :<br>  (exists (a:'a,b:'b), false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (a:'a,b:'b), false) = false<br><br>[&gt; Line 281: by (rewrite ...) <br>[goal&gt; Goal exists_false2 is proved <br>Exiting proof mode.<br><br><br>Goal exists_false3 :<br>  (exists (a:'a,b:'b,c:'c), false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (a:'a,b:'b,c:'c), false) = false<br><br>[&gt; Line 285: by (rewrite ...) <br>[goal&gt; Goal exists_false3 is proved <br>Exiting proof mode.<br><br><br>Goal exists_false4 :<br>  (exists (a:'a,b:'b,c:'c,d:'d), false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c, 'd<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (a:'a,b:'b,c:'c,d:'d), false) = false<br><br>[&gt; Line 289: by (rewrite ...) <br>[goal&gt; Goal exists_false4 is proved <br>Exiting proof mode.<br><br><br>Goal exists_false5 :<br>  (exists (a:'a,b:'b,c:'c,d:'d,e:'e), false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c, 'd, 'e<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (a:'a,b:'b,c:'c,d:'d,e:'e), false) = false<br><br>[&gt; Line 293: by (rewrite ...) <br>[goal&gt; Goal exists_false5 is proved <br>Exiting proof mode.<br><br><br>Goal exists_false6 :<br>  (exists (a:'a,b:'b,c:'c,d:'d,e:'e,f:'f), false) = false<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c, 'd, 'e, 'f<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (a:'a,b:'b,c:'c,d:'d,e:'e,f:'f), false) = false<br><br>[&gt; Line 297: by (rewrite ...) <br>[goal&gt; Goal exists_false6 is proved <br>Exiting proof mode.<br><br><br>Goal forall_true1 :<br>  (forall (a:'a), true) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(forall (a:'a), true) = true<br><br>[&gt; Line 307: auto <br>[goal&gt; Goal forall_true1 is proved <br>Exiting proof mode.<br><br><br>Goal forall_true2 :<br>  (forall (a:'a,b:'b), true) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(forall (a:'a,b:'b), true) = true<br><br>[&gt; Line 311: auto <br>[goal&gt; Goal forall_true2 is proved <br>Exiting proof mode.<br><br><br>Goal forall_true3 :<br>  (forall (a:'a,b:'b,c:'c), true) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(forall (a:'a,b:'b,c:'c), true) = true<br><br>[&gt; Line 315: auto <br>[goal&gt; Goal forall_true3 is proved <br>Exiting proof mode.<br><br><br>Goal forall_true4 :<br>  (forall (a:'a,b:'b,c:'c,d:'d), true) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c, 'd<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(forall (a:'a,b:'b,c:'c,d:'d), true) = true<br><br>[&gt; Line 319: auto <br>[goal&gt; Goal forall_true4 is proved <br>Exiting proof mode.<br><br><br>Goal forall_true5 :<br>  (forall (a:'a,b:'b,c:'c,d:'d,e:'e), true) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c, 'd, 'e<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(forall (a:'a,b:'b,c:'c,d:'d,e:'e), true) = true<br><br>[&gt; Line 323: auto <br>[goal&gt; Goal forall_true5 is proved <br>Exiting proof mode.<br><br><br>Goal forall_true6 :<br>  (forall (a:'a,b:'b,c:'c,d:'d,e:'e,f:'f), true) = true<br>[goal&gt; Focused goal (1/1):<br>System: any<br>Type variables: 'a, 'b, 'c, 'd, 'e, 'f<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(forall (a:'a,b:'b,c:'c,d:'d,e:'e,f:'f), true) = true<br><br>[&gt; Line 327: auto <br>[goal&gt; Goal forall_true6 is proved <br>Exiting proof mode.<br><br><br>[warning&gt; loaded: Basic.sp  &lt;]<br></span>
</span>

<span class="squirrel-step" id="step3">
<span class="input-line" id="in3"><br><br>axiom tags_neq : tag1 &lt;&gt; tag2.</span>
<span class="output-line" id="out3"></span>
</span>

<span class="squirrel-step" id="step4">
<span class="input-line" id="in4"><br><br>goal wa_R1_R2 (tau:timestamp,k:index):<br>  happens(tau) =&gt;<br>  (exists (i,j:index)<br>     snd(input@tau) = h(&lt;&lt;nR(k),fst(input@tau)&gt;,tag1&gt;,diff(key(i),key'(i,j))))<br>  =<br>  (exists (i,j:index),<br>     T(i,j) &lt; tau &amp;&amp; R(k) &lt; T(i,j) &amp;&amp;<br>     snd(output@T(i,j)) = snd(input@tau) &amp;&amp;<br>     fst(output@T(i,j)) = fst(input@tau) &amp;&amp;<br>     input@T(i,j) = output@R(k)).</span>
<span class="output-line" id="out4">Goal wa_R1_R2 :<br>  <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau) =&gt;<br>  (exists (i,j:index),<br>     <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) =<br>     <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))) =<br>  exists (i,j:index),<br>    <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>    <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>    <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br></span>
</span>

<span class="squirrel-step" id="step5">
<span class="input-line" id="in5"><br>Proof.</span>
<span class="output-line" id="out5">[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index,tau:timestamp<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau) =&gt;<br>(exists (i,j:index),<br>   <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))) =<br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step6">
<span class="input-line" id="in6"><br>  intro Hap.</span>
<span class="output-line" id="out6">[&gt; Line 70: (intro Hap) <br>[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index,tau:timestamp<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (i,j:index),<br>   <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))) =<br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step7">
<span class="input-line" id="in7"><br>  rewrite eq_iff; split.</span>
<span class="output-line" id="out7">[&gt; Line 71: ((rewrite ...);split) <br>[goal&gt; Focused goal (1/2):<br>System: left:default/left, right:default/right<br>Variables: k:index,tau:timestamp<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (i,j:index),<br>   <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))) =&gt;<br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step8">
<span class="input-line" id="in8"><br><br>  (* COND =&gt; WA *)<br>  + intro [i j H].</span>
<span class="output-line" id="out8">[&gt; Line 74: (intro [i j H]) <br>[goal&gt; Focused goal (1/2):<br>System: left:default/left, right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step9">
<span class="input-line" id="in9"><br>    use tags_neq; project.</span>
<span class="output-line" id="out9">[&gt; Line 75: ((have ... as );project) <br>[goal&gt; Focused goal (1/3):<br>System: left:default/left<br>Variables: i,j,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step10">
<span class="input-line" id="in10"><br><br>    (* LEFT *)<br>    - euf H =&gt; _ _ _ //.</span>
<span class="output-line" id="out10">[&gt; Line 78: ((euf H);(intro _ _ _ //)) <br>[goal&gt; Focused goal (1/3):<br>System: left:default/left<br>Variables: i,j,j0,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step11">
<span class="input-line" id="in11"><br>      exists i,j0.</span>
<span class="output-line" id="out11">[&gt; Line 79: (exists i, j0) <br>[goal&gt; Focused goal (1/3):<br>System: left:default/left<br>Variables: i,j,j0,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step12">
<span class="input-line" id="in12"><br>      assert input@T(i,j0)=nR(k) as Meq1 by auto.</span>
<span class="output-line" id="out12">[&gt; Line 80: ((have (input@T(i,j0) = nR(k)), Meq1); 1: by auto) <br>[goal&gt; Focused goal (1/3):<br>System: left:default/left<br>Variables: i,j,j0,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step13">
<span class="input-line" id="in13"><br>      fresh Meq1 =&gt; C /=.</span>
<span class="output-line" id="out13">[&gt; Line 81: ((fresh Meq1);(intro C /=)) <br>[goal&gt; Focused goal (1/3):<br>System: left:default/left<br>Variables: i,j,j0,k:index,tau:timestamp<br>C: <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span> || <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span> || <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span><br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j0)@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step14">
<span class="input-line" id="in14"><br>      case C =&gt; //.</span>
<span class="output-line" id="out14">[&gt; Line 82: ((case C);(intro //)) <br>[goal&gt; Focused goal (1/4):<br>System: left:default/left<br>Variables: i,j,j0,k:index,tau:timestamp<br>C: <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span><br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j0)@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step15">
<span class="input-line" id="in15"><br>      * by depends R(k),R1(k).</span>
<span class="output-line" id="out15">[&gt; Line 83: by (depends R(k), R1(k)) <br>[goal&gt; Focused goal (1/3):<br>System: left:default/left<br>Variables: i,j,j0,k:index,tau:timestamp<br>C: <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span><br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j0)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j0)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j0)@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j0)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step16">
<span class="input-line" id="in16"><br>      * by depends R(k),R2(k).</span>
<span class="output-line" id="out16">[&gt; Line 84: by (depends R(k), R2(k)) <br>[goal&gt; Focused goal (1/2):<br>System: right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step17">
<span class="input-line" id="in17"><br><br>    (* RIGHT *)<br>    - euf H =&gt; _ _ _ //.</span>
<span class="output-line" id="out17">[&gt; Line 87: ((euf H);(intro _ _ _ //)) <br>[goal&gt; Focused goal (1/2):<br>System: right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: i = i &amp;&amp; j = j<br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (i,j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step18">
<span class="input-line" id="in18"><br>      exists i,j.</span>
<span class="output-line" id="out18">[&gt; Line 88: (exists i, j) <br>[goal&gt; Focused goal (1/2):<br>System: right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: i = i &amp;&amp; j = j<br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step19">
<span class="input-line" id="in19"><br>      assert input@T(i,j)=nR(k) as Meq1 by auto.</span>
<span class="output-line" id="out19">[&gt; Line 89: ((have (input@T(i,j) = nR(k)), Meq1); 1: by auto) <br>[goal&gt; Focused goal (1/2):<br>System: right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: i = i &amp;&amp; j = j<br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step20">
<span class="input-line" id="in20"><br>      fresh Meq1 =&gt; C /=.</span>
<span class="output-line" id="out20">[&gt; Line 90: ((fresh Meq1);(intro C /=)) <br>[goal&gt; Focused goal (1/2):<br>System: right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>C: <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> || <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> || <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span><br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step21">
<span class="input-line" id="in21"><br>      case C =&gt; //.</span>
<span class="output-line" id="out21">[&gt; Line 91: ((case C);(intro //)) <br>[goal&gt; Focused goal (1/3):<br>System: right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>C: <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span><br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step22">
<span class="input-line" id="in22"><br>      * by depends R(k),R1(k).</span>
<span class="output-line" id="out22">[&gt; Line 92: by (depends R(k), R1(k)) <br>[goal&gt; Focused goal (1/2):<br>System: right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>C: <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span><br>H: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step23">
<span class="input-line" id="in23"><br>      * by depends R(k),R2(k).</span>
<span class="output-line" id="out23">[&gt; Line 93: by (depends R(k), R2(k)) <br>[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index,tau:timestamp<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(exists (i,j:index),<br>   <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>   <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>   <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>   <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>) =&gt;<br>exists (i,j:index),<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br></span>
</span>

<span class="squirrel-step" id="step24">
<span class="input-line" id="in24"><br><br>  (* WA =&gt; COND *)<br>  + intro [i j _]; exists i,j.</span>
<span class="output-line" id="out24">[&gt; Line 96: ((intro [i j _]);(exists i, j)) <br>[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: i,j,k:index,tau:timestamp<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(tau)<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; tau &amp;&amp;<br>   <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>   <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp;<br>   <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@tau)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br></span>
</span>

<span class="squirrel-step" id="step25">
<span class="input-line" id="in25"><br>    by expand output, m2.</span>
<span class="output-line" id="out25">[&gt; Line 97: by (expand output, m2) <br>[goal&gt; Goal wa_R1_R2 is proved <br></span>
</span>

<span class="squirrel-step" id="step26">
<span class="input-line" id="in26"><br>Qed.</span>
<span class="output-line" id="out26">Exiting proof mode.<br><br><br></span>
</span>

<span class="squirrel-step" id="step27">
<span class="input-line" id="in27">goal [default/left] wa_R1_left (i,k:index):<br>  happens(R1(k)) =&gt;<br>  (snd(input@R1(k)) = h(&lt;&lt;nR(k),fst(input@R1(k))&gt;,tag1&gt;,key(i)))<br>  =<br>  (exists j:index,<br>     T(i,j) &lt; R1(k) &amp;&amp; R(k) &lt; T(i,j) &amp;&amp;<br>     snd(output@T(i,j)) = snd(input@R1(k)) &amp;&amp;<br>     fst(output@T(i,j)) = fst(input@R1(k)) &amp;&amp;<br>     input@T(i,j) = output@R(k)).</span>
<span class="output-line" id="out27">Goal wa_R1_left :<br>  <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) =&gt;<br>  (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))) =<br>  exists (j:index),<br>    <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>    <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>    <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br></span>
<span class="com-line" id="com27"><p>The next two lemmas are more precise variants of the previous one, specifically for R1. They are useful to simplify the try-find construct in the output of that action. Note that the proofs of the next two lemmas are almost identical, but their statements differ in the treatment of index k, and they deal with distinct systems.</p>
</span>
</span>

<span class="squirrel-step" id="step28">
<span class="input-line" id="in28"><br>Proof.</span>
<span class="output-line" id="out28">[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,k:index<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) =&gt;<br>(<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))) =<br>exists (j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step29">
<span class="input-line" id="in29"><br>  intro Hap.</span>
<span class="output-line" id="out29">[&gt; Line 116: (intro Hap) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))) =<br>exists (j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step30">
<span class="input-line" id="in30"><br>  rewrite eq_iff; split; 2: by intro [j _]; expand output, m2.</span>
<span class="output-line" id="out30">[&gt; Line 117: ((rewrite ...);<br>             (split; 2: by ((intro [j _]);(expand output, m2))))<br><br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i)) =&gt;<br>exists (j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step31">
<span class="input-line" id="in31"><br><br>  intro Meq.</span>
<span class="output-line" id="out31">[&gt; Line 119: (intro Meq) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step32">
<span class="input-line" id="in32"><br>  use tags_neq.</span>
<span class="output-line" id="out32">[&gt; Line 120: (have ... as ) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step33">
<span class="input-line" id="in33"><br>  euf Meq =&gt; _ _ _ //.</span>
<span class="output-line" id="out33">[&gt; Line 121: ((euf Meq);(intro _ _ _ //)) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>  <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step34">
<span class="input-line" id="in34"><br>  exists j.</span>
<span class="output-line" id="out34">[&gt; Line 122: (exists j) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step35">
<span class="input-line" id="in35"><br>  assert input@T(i,j) = nR(k) as Meq1 by auto.</span>
<span class="output-line" id="out35">[&gt; Line 123: ((have (input@T(i,j) = nR(k)), Meq1); 1: by auto) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step36">
<span class="input-line" id="in36"><br>  fresh Meq1 =&gt; C /=.</span>
<span class="output-line" id="out36">[&gt; Line 124: ((fresh Meq1);(intro C /=)) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,j,k:index<br>C: <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> || <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> || <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span><br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step37">
<span class="input-line" id="in37"><br>  case C =&gt; //.</span>
<span class="output-line" id="out37">[&gt; Line 125: ((case C);(intro //)) <br>[goal&gt; Focused goal (1/1):<br>System: default/left<br>Variables: i,j,k:index<br>C: <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span><br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step38">
<span class="input-line" id="in38"><br>  by depends R(k),R2(k).</span>
<span class="output-line" id="out38">[&gt; Line 126: by (depends R(k), R2(k)) <br>[goal&gt; Goal wa_R1_left is proved <br></span>
</span>

<span class="squirrel-step" id="step39">
<span class="input-line" id="in39"><br>Qed.</span>
<span class="output-line" id="out39">Exiting proof mode.<br><br><br></span>
</span>

<span class="squirrel-step" id="step40">
<span class="input-line" id="in40"><br><br>goal [default/right] wa_R1_right (i,j,k:index):<br>  happens(R1(k)) =&gt;<br>  (snd(input@R1(k)) = h(&lt;&lt;nR(k),fst(input@R1(k))&gt;,tag1&gt;,key'(i,j)))<br>  =<br>  (T(i,j) &lt; R1(k) &amp;&amp; R(k) &lt; T(i,j) &amp;&amp;<br>   snd(output@T(i,j)) = snd(input@R1(k)) &amp;&amp;<br>   fst(output@T(i,j)) = fst(input@R1(k)) &amp;&amp;<br>   input@T(i,j) = output@R(k)).</span>
<span class="output-line" id="out40">Goal wa_R1_right :<br>  <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) =&gt;<br>  (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>  (<span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>   <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>   <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>   <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br></span>
</span>

<span class="squirrel-step" id="step41">
<span class="input-line" id="in41"><br>Proof.</span>
<span class="output-line" id="out41">[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) =&gt;<br>(<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>(<span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br> <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br> <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br> <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br><br></span>
</span>

<span class="squirrel-step" id="step42">
<span class="input-line" id="in42"><br>  intro Hap.</span>
<span class="output-line" id="out42">[&gt; Line 138: (intro Hap) <br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>(<span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br> <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br> <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br> <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br><br></span>
</span>

<span class="squirrel-step" id="step43">
<span class="input-line" id="in43"><br>  rewrite eq_iff; split; 2: by intro [j _]; expand output, m2.</span>
<span class="output-line" id="out43">[&gt; Line 139: ((rewrite ...);<br>             (split; 2: by ((intro [j _]);(expand output, m2))))<br><br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j)) =&gt;<br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step44">
<span class="input-line" id="in44"><br><br>  intro Meq.</span>
<span class="output-line" id="out44">[&gt; Line 141: (intro Meq) <br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step45">
<span class="input-line" id="in45"><br>  use tags_neq.</span>
<span class="output-line" id="out45">[&gt; Line 142: (have ... as ) <br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step46">
<span class="input-line" id="in46"><br>  euf Meq =&gt; _ _ _ //.</span>
<span class="output-line" id="out46">[&gt; Line 143: ((euf Meq);(intro _ _ _ //)) <br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: i = i &amp;&amp; j = j<br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step47">
<span class="input-line" id="in47"><br>  assert input@T(i,j) = nR(k) as Meq1 by auto.</span>
<span class="output-line" id="out47">[&gt; Line 144: ((have (input@T(i,j) = nR(k)), Meq1); 1: by auto) <br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: i = i &amp;&amp; j = j<br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step48">
<span class="input-line" id="in48"><br>  fresh Meq1 =&gt; C /=.</span>
<span class="output-line" id="out48">[&gt; Line 145: ((fresh Meq1);(intro C /=)) <br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>C: <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> || <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> || <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span><br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step49">
<span class="input-line" id="in49"><br>  case C =&gt; //.</span>
<span class="output-line" id="out49">[&gt; Line 146: ((case C);(intro //)) <br>[goal&gt; Focused goal (1/1):<br>System: default/right<br>Variables: i,j,k:index<br>C: <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span><br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Meq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Meq1: <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gn" style="color: #AA5500">nR</span>(k)<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br>_: &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; = &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;<br>_: <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step50">
<span class="input-line" id="in50"><br>  by depends R(k),R2(k).</span>
<span class="output-line" id="out50">[&gt; Line 147: by (depends R(k), R2(k)) <br>[goal&gt; Goal wa_R1_right is proved <br></span>
</span>

<span class="squirrel-step" id="step51">
<span class="input-line" id="in51"><br>Qed.</span>
<span class="output-line" id="out51">Exiting proof mode.<br><br><br></span>
</span>

<span class="squirrel-step" id="step52">
<span class="input-line" id="in52">goal wa_R1_tryfind (k:index) : happens(R1(k)) =&gt;<br>  (if exec@pred(R1(k)) &amp;&amp; cond@R1(k) then<br>   try find i,j such that<br>     snd(input@R1(k)) =<br>     h(&lt;&lt;nR(k),fst(input@R1(k))&gt;,tag1&gt;,diff(key(i),key'(i,j)))<br>   in h(&lt;&lt;snd(input@R1(k)),nR(k)&gt;,tag2&gt;,diff(key(i),key'(i,j))))<br>  =<br>  (if exec@pred(R1(k)) &amp;&amp; cond@R1(k) then<br>   try find i,j such that<br>     exec@pred(R1(k)) &amp;&amp;<br>     (T(i,j) &lt; R1(k) &amp;&amp; R(k) &lt; T(i,j) &amp;&amp;<br>      snd(output@T(i,j)) = snd(input@R1(k)) &amp;&amp;<br>      fst(output@T(i,j)) = fst(input@R1(k)) &amp;&amp;<br>      input@T(i,j) = output@R(k))<br>   in<br>   h(&lt;&lt;snd(input@R1(k)),nR(k)&gt;,tag2&gt;,diff(key(i),key'(i,j)))).</span>
<span class="output-line" id="out52">Goal wa_R1_tryfind :<br>  <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) =&gt;<br>  if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>    try find i,j:index such that<br>      (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>       <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))))<br>    in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>  if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>    try find i,j:index such that<br>      (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>       <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>       <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>       <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>       <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>    in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br></span>
<span class="com-line" id="com52"><p>Equality used to rewrite the try-find in R1 so that its condition can be discharged using fadup.</p>
</span>
</span>

<span class="squirrel-step" id="step53">
<span class="input-line" id="in53"><br>Proof.</span>
<span class="output-line" id="out53">[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) =&gt;<br>if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>  try find i,j:index such that<br>    (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>     <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))))<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>  try find i,j:index such that<br>    (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>     <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>     <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>     <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>     <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br></span>
</span>

<span class="squirrel-step" id="step54">
<span class="input-line" id="in54"><br>  intro Hap.</span>
<span class="output-line" id="out54">[&gt; Line 169: (intro Hap) <br>[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>  try find i,j:index such that<br>    (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>     <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))))<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>  try find i,j:index such that<br>    (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>     <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>     <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>     <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>     <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br></span>
</span>

<span class="squirrel-step" id="step55">
<span class="input-line" id="in55"><br>  case exec@pred(R1(k)) =&gt; Hexec; 2: auto.</span>
<span class="output-line" id="out55">[&gt; Line 170: (((case exec@pred(R1(k)));(intro Hexec)); 2: auto) <br>[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Hexec: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if (true &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>  try find i,j:index such that<br>    (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>     <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))))<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>if (true &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>  try find i,j:index such that<br>    (true &amp;&amp;<br>     <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>     <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>     <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>     <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br></span>
</span>

<span class="squirrel-step" id="step56">
<span class="input-line" id="in56"><br>  case cond@R1(k) =&gt; Hcond; 2: auto.</span>
<span class="output-line" id="out56">[&gt; Line 171: (((case cond@R1(k));(intro Hcond)); 2: auto) <br>[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Hcond: <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>Hexec: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>if (true &amp;&amp; true) then<br>  try find i,j:index such that<br>    (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>     <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))))<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>if (true &amp;&amp; true) then<br>  try find i,j:index such that<br>    (true &amp;&amp;<br>     <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>     <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>     <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>     <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>  in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br></span>
</span>

<span class="squirrel-step" id="step57">
<span class="input-line" id="in57"><br>  simpl.</span>
<span class="output-line" id="out57">[&gt; Line 172: simpl <br>[goal&gt; Focused goal (1/1):<br>System: left:default/left, right:default/right<br>Variables: k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Hcond: <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>Hexec: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>try find i,j:index such that<br>  (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>   <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))))<br>in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j))) =<br>try find i,j:index such that<br>  (<span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>   <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>   <span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>   <span class="gn" style="color: #AA5500">nT</span>(i,j) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br></span>
</span>

<span class="squirrel-step" id="step58">
<span class="input-line" id="in58"><br>  (* It is important to project before using &quot;fa&quot; on<br>     the &quot;try find&quot; construct so that the redundant<br>     index k on the left is treated smartly. *)<br>  project.</span>
<span class="output-line" id="out58">[&gt; Line 176: project <br>[goal&gt; Focused goal (1/2):<br>System: left:default/left<br>Variables: k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Hcond: <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>Hexec: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>try find i,j:index such that<br>  (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i)))<br>in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i)) =<br>try find i,j:index such that<br>  (<span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>   <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>   <span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>   <span class="gn" style="color: #AA5500">nT</span>(i,j) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br><br></span>
</span>

<span class="squirrel-step" id="step59">
<span class="input-line" id="in59"><br>  + fa =&gt; // Heq.</span>
<span class="output-line" id="out59">[&gt; Line 177: (fa;(intro // Heq)) <br>[goal&gt; Focused goal (1/2):<br>System: left:default/left<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Hcond: <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>Heq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i))<br>Hexec: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>exists (j:index),<br>  <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>  <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>  <span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>  <span class="gn" style="color: #AA5500">nT</span>(i,j) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step60">
<span class="input-line" id="in60"><br>    by rewrite wa_R1_left in Heq.</span>
<span class="output-line" id="out60">[&gt; Line 178: by (rewrite ... in Heq) <br>[goal&gt; Focused goal (1/1):<br>System: right:default/right<br>Variables: k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Hcond: <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>Hexec: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>try find i,j:index such that<br>  (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j)))<br>in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j)) =<br>try find i,j:index such that<br>  (<span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>   <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>   <span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>   <span class="gn" style="color: #AA5500">nT</span>(i,j) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br><br></span>
</span>

<span class="squirrel-step" id="step61">
<span class="input-line" id="in61"><br>  + fa =&gt; // Heq.</span>
<span class="output-line" id="out61">[&gt; Line 179: (fa;(intro // Heq)) <br>[goal&gt; Focused goal (1/1):<br>System: right:default/right<br>Variables: i,j,k:index<br>Hap: <span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>Hcond: <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>Heq: <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i,j))<br>Hexec: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br><span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br><span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br><span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br><span class="gn" style="color: #AA5500">nT</span>(i,j) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br></span>
</span>

<span class="squirrel-step" id="step62">
<span class="input-line" id="in62"><br>    by rewrite wa_R1_right in Heq.</span>
<span class="output-line" id="out62">[&gt; Line 180: by (rewrite ... in Heq) <br>[goal&gt; Goal wa_R1_tryfind is proved <br></span>
</span>

<span class="squirrel-step" id="step63">
<span class="input-line" id="in63"><br>Qed.</span>
<span class="output-line" id="out63">Exiting proof mode.<br><br><br></span>
</span>

<span class="squirrel-step" id="step64">
<span class="input-line" id="in64"><br><br>equiv unlinkability.</span>
<span class="output-line" id="out64">Goal unlinkability :<br>  forall t:timestamp, equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@t)<br></span>
</span>

<span class="squirrel-step" id="step65">
<span class="input-line" id="in65"><br>Proof.</span>
<span class="output-line" id="out65">[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: t:timestamp<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(t)]<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@t<br><br><br></span>
</span>

<span class="squirrel-step" id="step66">
<span class="input-line" id="in66"><br>  induction t.</span>
<span class="output-line" id="out66">[&gt; Line 185: (induction t) <br>[goal&gt; Focused goal (1/5):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">init</span>)]<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="ga" style="color: #00AA00">init</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step67">
<span class="input-line" id="in67"><br><br>  (* Case init *)<br>  + auto.</span>
<span class="output-line" id="out67">[&gt; Line 188: auto <br>[goal&gt; Focused goal (1/4):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="ga" style="color: #00AA00">R(k)</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step68">
<span class="input-line" id="in68"><br><br>  (* Case R *)<br>  + expand frame, exec, cond, output.</span>
<span class="output-line" id="out68">[&gt; Line 191: (expand frame, exec, cond, output) <br>[goal&gt; Focused goal (1/4):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: &lt;<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>),<br>    &lt;<span class="gf" style="font-weight: bold">of_bool</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>) &amp;&amp; true),if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>) &amp;&amp; true) then <span class="gn" style="color: #AA5500">nR</span>(k)&gt;&gt;<br><br><br></span>
</span>

<span class="squirrel-step" id="step69">
<span class="input-line" id="in69"><br>    fa !&lt;_,_&gt;, if _ then _.</span>
<span class="output-line" id="out69">[&gt; Line 192: (fa  !pair(_,_) <span>if</span> _ <span>then</span> _ <span>else</span> zero) <br>[goal&gt; Focused goal (1/4):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>)<br>1: <span class="gn" style="color: #AA5500">nR</span>(k)<br><br><br></span>
</span>

<span class="squirrel-step" id="step70">
<span class="input-line" id="in70"><br>    fresh 1; rewrite if_true.</span>
<span class="output-line" id="out70">[&gt; Line 193: ((fresh 1);(rewrite ...)) <br>[goal&gt; Focused goal (1/5):<br>System: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>(forall (k0:index), <span class="ga" style="color: #00AA00">R2(k0)</span> &lt; <span class="ga" style="color: #00AA00">R(k)</span> =&gt; k0 &lt;&gt; k) &amp;&amp;<br>(forall (k0:index), <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R(k)</span> =&gt; k0 &lt;&gt; k) &amp;&amp;<br>forall (k0:index), <span class="ga" style="color: #00AA00">R(k0)</span> &lt; <span class="ga" style="color: #00AA00">R(k)</span> =&gt; k0 &lt;&gt; k<br><br></span>
</span>

<span class="squirrel-step" id="step71">
<span class="input-line" id="in71"> {<br>      repeat split =&gt; // j0 H1.</span>
<span class="output-line" id="out71">[&gt; Line 194: ((repeat split);(intro // j0 H1)) <br>[goal&gt; Focused goal (1/6):<br>System: left:default/left, right:default/right (same for equivalences)<br>Variables: j0,k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R(k)</span>)]<br>H1: <span class="ga" style="color: #00AA00">R2(j0)</span> &lt; <span class="ga" style="color: #00AA00">R(k)</span><br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>j0 &lt;&gt; k<br><br></span>
</span>

<span class="squirrel-step" id="step72">
<span class="input-line" id="in72"><br>      by depends R(j0),R2(j0).</span>
<span class="output-line" id="out72">[&gt; Line 195: by (depends R(j0), R2(j0)) <br>[goal&gt; Focused goal (1/5):<br>System: left:default/left, right:default/right (same for equivalences)<br>Variables: j0,k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R(k)</span>)]<br>H1: <span class="ga" style="color: #00AA00">R1(j0)</span> &lt; <span class="ga" style="color: #00AA00">R(k)</span><br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>j0 &lt;&gt; k<br><br></span>
</span>

<span class="squirrel-step" id="step73">
<span class="input-line" id="in73"><br>      by depends R(j0),R1(j0).</span>
<span class="output-line" id="out73">[&gt; Line 196: by (depends R(j0), R1(j0)) <br>[goal&gt; Focused goal (1/4):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R(k)</span>)<br><br><br></span>
</span>

<span class="squirrel-step" id="step74">
<span class="input-line" id="in74"><br>    }<br>    auto.</span>
<span class="output-line" id="out74">[&gt; Line 198: auto <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step75">
<span class="input-line" id="in75"><br><br>  (* Case R1 *)<br>  + expand frame, exec, output.</span>
<span class="output-line" id="out75">[&gt; Line 201: (expand frame, exec, output) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: &lt;<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>),<br>    &lt;<span class="gf" style="font-weight: bold">of_bool</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<br>     if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>       try find i,k0:index such that<br>         (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>          <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,k0))))<br>       in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,k0)))&gt;&gt;<br><br><br></span>
</span>

<span class="squirrel-step" id="step76">
<span class="input-line" id="in76"><br>    fa !&lt;_,_&gt;.</span>
<span class="output-line" id="out76">[&gt; Line 202: (fa  !pair(_,_)) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>1: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>2: if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>     try find i,k0:index such that<br>       (<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) =<br>        <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,k0))))<br>     in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,k0)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step77">
<span class="input-line" id="in77"><br>    rewrite wa_R1_tryfind; 1: auto.</span>
<span class="output-line" id="out77">[&gt; Line 203: ((rewrite ...); 1: auto) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>1: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span><br>2: if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) then<br>     try find i,j:index such that<br>       (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>        <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>        <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>        <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>        <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>     in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step78">
<span class="input-line" id="in78"> <br>    expand cond; rewrite wa_R1_R2; 1: auto.</span>
<span class="output-line" id="out78">[&gt; Line 204: ((expand cond);((rewrite ...); 1: auto)) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>1: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>   exists (i,j:index),<br>     <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>     <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>     <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>     <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span><br>2: if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>       exists (i,j:index),<br>         <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>         <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>         <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>         <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>     then<br>     try find i,j:index such that<br>       (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>        <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>        <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>        <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>        <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>     in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step79">
<span class="input-line" id="in79"> <br>    fa 2; fadup 1.</span>
<span class="output-line" id="out79">[&gt; Line 205: ((fa 2);(fadup 1)) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>1: try find i,j:index such that<br>     (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>      <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> &amp;&amp;<br>      <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>      <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp;<br>      <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br>   in <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step80">
<span class="input-line" id="in80"><br>    fa 1; fadup 1.</span>
<span class="output-line" id="out80">[&gt; Line 206: ((fa 1);(fadup 1)) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j,k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>1: <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step81">
<span class="input-line" id="in81"><br>    prf 1.</span>
<span class="output-line" id="out81">[&gt; Line 207: (prf 1) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j,k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>1: if (true &amp;&amp;<br>       diff(<br>         forall (k0,i0:index),<br>           <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>           <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i0)) &amp;&amp;<br>           i = i0 =&gt;<br>           &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>           &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>),<span class="gn" style="color: #AA5500">nR</span>(k0)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<br>         forall (k0,i0,k1:index),<br>           <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>           <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>) =<br>           <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i0,k1)) &amp;&amp;<br>           i = i0 &amp;&amp; j = k1 =&gt;<br>           &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>           &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>),<span class="gn" style="color: #AA5500">nR</span>(k0)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;) &amp;&amp;<br>       diff(<br>         (forall (k0,i0:index),<br>            <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>            i = i0 =&gt;<br>            &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>            &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         (forall (k0,i0:index),<br>            <span class="ga" style="color: #00AA00">R2(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>            i = i0 =&gt;<br>            &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>            &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         forall (i0,j0:index),<br>           <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>           i = i0 =&gt;<br>           &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>           &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<br>         (forall (k0,i0,k1:index),<br>            <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>            i = i0 &amp;&amp; j = k1 =&gt;<br>            &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>            &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         (forall (k0,i0,k1:index),<br>            <span class="ga" style="color: #00AA00">R2(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>            i = i0 &amp;&amp; j = k1 =&gt;<br>            &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>            &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         forall (i0,j0:index),<br>           <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>           i = i0 &amp;&amp; j = j0 =&gt;<br>           &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt;<br>           &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;)) then <span class="gn" style="color: #AA5500">n_PRF</span><br>   else <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step82">
<span class="input-line" id="in82"><br>    rewrite if_true.</span>
<span class="output-line" id="out82">[&gt; Line 208: (rewrite ...) <br>[goal&gt; Focused goal (1/4):<br>System: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j,k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>true &amp;&amp;<br>diff(<br>  forall (k0,i0:index),<br>    <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i0)) &amp;&amp;<br>    i = i0 =&gt;<br>    &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>),<span class="gn" style="color: #AA5500">nR</span>(k0)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<br>  forall (k0,i0,k1:index),<br>    <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i0,k1)) &amp;&amp;<br>    i = i0 &amp;&amp; j = k1 =&gt;<br>    &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>),<span class="gn" style="color: #AA5500">nR</span>(k0)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;) &amp;&amp;<br>diff(<br>  (forall (k0,i0:index),<br>     <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k0,i0:index),<br>     <span class="ga" style="color: #00AA00">R2(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>    i = i0 =&gt;<br>    &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<br>  (forall (k0,i0,k1:index),<br>     <span class="ga" style="color: #00AA00">R1(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>     i = i0 &amp;&amp; j = k1 =&gt;<br>     &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k0,i0,k1:index),<br>     <span class="ga" style="color: #00AA00">R2(k0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>     i = i0 &amp;&amp; j = k1 =&gt;<br>     &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k0),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k0)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">R1(k)</span> =&gt;<br>    i = i0 &amp;&amp; j = j0 =&gt;<br>    &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;)<br><br></span>
</span>

<span class="squirrel-step" id="step83">
<span class="input-line" id="in83"><br>    by use tags_neq; project.</span>
<span class="output-line" id="out83">[&gt; Line 209: by ((have ... as );project) <br>[goal&gt; Focused goal (1/3):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j,k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R1(k)</span>)<br>1: <span class="gn" style="color: #AA5500">n_PRF</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step84">
<span class="input-line" id="in84"><br>    by fresh 1.</span>
<span class="output-line" id="out84">[&gt; Line 210: by (fresh 1) <br>[goal&gt; Focused goal (1/2):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R2(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="ga" style="color: #00AA00">R2(k)</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step85">
<span class="input-line" id="in85"><br><br>  (* Case R2 *)<br>  + expand frame, exec, output.</span>
<span class="output-line" id="out85">[&gt; Line 213: (expand frame, exec, output) <br>[goal&gt; Focused goal (1/2):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R2(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: &lt;<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>),<br>    &lt;<span class="gf" style="font-weight: bold">of_bool</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R2(k)</span>),<br>     if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R2(k)</span>) then <span class="gf" style="font-weight: bold">ko</span>&gt;&gt;<br><br><br></span>
</span>

<span class="squirrel-step" id="step86">
<span class="input-line" id="in86"><br>    fa !&lt;_,_&gt;.</span>
<span class="output-line" id="out86">[&gt; Line 214: (fa  !pair(_,_)) <br>[goal&gt; Focused goal (1/2):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R2(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>)<br>1: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">cond</span>@<span class="ga" style="color: #00AA00">R2(k)</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step87">
<span class="input-line" id="in87"><br>    expand cond; rewrite wa_R1_R2; 1: auto.</span>
<span class="output-line" id="out87">[&gt; Line 215: ((expand cond);((rewrite ...); 1: auto)) <br>[goal&gt; Focused goal (1/2):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: k:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">R2(k)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>)<br>1: <span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">R2(k)</span>) &amp;&amp;<br>   not(exists (i,j:index),<br>         <span class="ga" style="color: #00AA00">T(i,j)</span> &lt; <span class="ga" style="color: #00AA00">R2(k)</span> &amp;&amp;<br>         <span class="ga" style="color: #00AA00">R(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> &amp;&amp;<br>         <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>) &amp;&amp;<br>         <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>) = <span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>) &amp;&amp; <span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span> = <span class="gm" style="font-weight: bold; color: #AA00AA">output</span>@<span class="ga" style="color: #00AA00">R(k)</span>)<br><br><br></span>
</span>

<span class="squirrel-step" id="step88">
<span class="input-line" id="in88"> <br>    by fadup 1.</span>
<span class="output-line" id="out88">[&gt; Line 216: by (fadup 1) <br>[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="ga" style="color: #00AA00">T(i,j)</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step89">
<span class="input-line" id="in89"><br><br>  (* Case T *)<br>  + expand frame, exec, cond, output.</span>
<span class="output-line" id="out89">[&gt; Line 219: (expand frame, exec, cond, output) <br>[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: &lt;<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>),<br>    &lt;<span class="gf" style="font-weight: bold">of_bool</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>) &amp;&amp; true),<br>     if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>) &amp;&amp; true) then &lt;<span class="gn" style="color: #AA5500">nT</span>(i,j),<span class="gm" style="font-weight: bold; color: #AA00AA">m2</span>(i,j)@<span class="ga" style="color: #00AA00">T(i,j)</span>&gt;&gt;&gt;<br><br><br></span>
</span>

<span class="squirrel-step" id="step90">
<span class="input-line" id="in90"><br>    expand m2(i,j)@T(i,j).</span>
<span class="output-line" id="out90">[&gt; Line 220: (expand m2(i,j)@T(i,j)) <br>[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: &lt;<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>),<br>    &lt;<span class="gf" style="font-weight: bold">of_bool</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>) &amp;&amp; true),<br>     if (<span class="gm" style="font-weight: bold; color: #AA00AA">exec</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>) &amp;&amp; true) then<br>       &lt;<span class="gn" style="color: #AA5500">nT</span>(i,j),<span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))&gt;&gt;&gt;<br><br><br></span>
</span>

<span class="squirrel-step" id="step91">
<span class="input-line" id="in91"><br>    fa !&lt;_,_&gt;, if _ then _, &lt;_,_&gt;.</span>
<span class="output-line" id="out91">[&gt; Line 221: (fa  !pair(_,_) <span>if</span> _ <span>then</span> _ <span>else</span> zero pair(_,_)) <br>[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)<br>1: <span class="gn" style="color: #AA5500">nT</span>(i,j)<br>2: <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step92">
<span class="input-line" id="in92"><br>    prf 2.</span>
<span class="output-line" id="out92">[&gt; Line 222: (prf 2) <br>[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)<br>1: <span class="gn" style="color: #AA5500">nT</span>(i,j)<br>2: if (true &amp;&amp;<br>       diff(<br>         forall (k,i0:index),<br>           <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>           <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i0)) &amp;&amp;<br>           i = i0 =&gt;<br>           &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<br>         forall (k,i0,k0:index),<br>           <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>           <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i0,k0)) &amp;&amp;<br>           i = i0 &amp;&amp; j = k0 =&gt;<br>           &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;) &amp;&amp;<br>       diff(<br>         (forall (k,i0:index),<br>            <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>            i = i0 =&gt;<br>            &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         (forall (k,i0:index),<br>            <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>            i = i0 =&gt;<br>            &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         forall (i0,j0:index),<br>           <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>           i = i0 =&gt;<br>           &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<br>         (forall (k,i0,k0:index),<br>            <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>            i = i0 &amp;&amp; j = k0 =&gt;<br>            &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         (forall (k,i0,k0:index),<br>            <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>            i = i0 &amp;&amp; j = k0 =&gt;<br>            &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>         forall (i0,j0:index),<br>           <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>           i = i0 &amp;&amp; j = j0 =&gt;<br>           &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;))<br>     then <span class="gn" style="color: #AA5500">n_PRF</span><br>   else <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,diff(<span class="gn" style="color: #AA5500">key</span>(i), <span class="gn" style="color: #AA5500">key'</span>(i,j)))<br><br><br></span>
</span>

<span class="squirrel-step" id="step93">
<span class="input-line" id="in93"><br>    rewrite if_true.</span>
<span class="output-line" id="out93">[&gt; Line 223: (rewrite ...) <br>[goal&gt; Focused goal (1/2):<br>System: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>true &amp;&amp;<br>diff(<br>  forall (k,i0:index),<br>    <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i0)) &amp;&amp; i = i0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<br>  forall (k,i0,k0:index),<br>    <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i0,k0)) &amp;&amp;<br>    i = i0 &amp;&amp; j = k0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;) &amp;&amp;<br>diff(<br>  (forall (k,i0:index),<br>     <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k,i0:index),<br>     <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    i = i0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<br>  (forall (k,i0,k0:index),<br>     <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 &amp;&amp; j = k0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k,i0,k0:index),<br>     <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 &amp;&amp; j = k0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    i = i0 &amp;&amp; j = j0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;)<br><br></span>
</span>

<span class="squirrel-step" id="step94">
<span class="input-line" id="in94"> {<br>      simpl.</span>
<span class="output-line" id="out94">[&gt; Line 224: simpl <br>[goal&gt; Focused goal (1/2):<br>System: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>diff(<br>  forall (k,i0:index),<br>    <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i0)) &amp;&amp; i = i0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<br>  forall (k,i0,k0:index),<br>    <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i0,k0)) &amp;&amp;<br>    i = i0 &amp;&amp; j = k0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;) &amp;&amp;<br>diff(<br>  (forall (k,i0:index),<br>     <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k,i0:index),<br>     <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    i = i0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<br>  (forall (k,i0,k0:index),<br>     <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 &amp;&amp; j = k0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k,i0,k0:index),<br>     <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 &amp;&amp; j = k0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    i = i0 &amp;&amp; j = j0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;)<br><br></span>
</span>

<span class="squirrel-step" id="step95">
<span class="input-line" id="in95"><br>      use tags_neq.</span>
<span class="output-line" id="out95">[&gt; Line 225: (have ... as ) <br>[goal&gt; Focused goal (1/2):<br>System: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br>Mneq: <span class="gf" style="font-weight: bold">tag1</span> &lt;&gt; <span class="gf" style="font-weight: bold">tag2</span><br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>diff(<br>  forall (k,i0:index),<br>    <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key</span>(i0)) &amp;&amp; i = i0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;,<br>  forall (k,i0,k0:index),<br>    <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    <span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>) = <span class="gf" style="font-weight: bold">h</span>(&lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<span class="gn" style="color: #AA5500">key'</span>(i0,k0)) &amp;&amp;<br>    i = i0 &amp;&amp; j = k0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gf" style="font-weight: bold">snd</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>),<span class="gn" style="color: #AA5500">nR</span>(k)&gt;,<span class="gf" style="font-weight: bold">tag2</span>&gt;) &amp;&amp;<br>diff(<br>  (forall (k,i0:index),<br>     <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k,i0:index),<br>     <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    i = i0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;,<br>  (forall (k,i0,k0:index),<br>     <span class="ga" style="color: #00AA00">R1(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 &amp;&amp; j = k0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R1(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  (forall (k,i0,k0:index),<br>     <span class="ga" style="color: #00AA00">R2(k)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>     i = i0 &amp;&amp; j = k0 =&gt;<br>     &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gn" style="color: #AA5500">nR</span>(k),<span class="gf" style="font-weight: bold">fst</span>(<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">R2(k)</span>)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;) &amp;&amp;<br>  forall (i0,j0:index),<br>    <span class="ga" style="color: #00AA00">T(i0,j0)</span> &lt; <span class="ga" style="color: #00AA00">T(i,j)</span> =&gt;<br>    i = i0 &amp;&amp; j = j0 =&gt;<br>    &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i,j)</span>,<span class="gn" style="color: #AA5500">nT</span>(i,j)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt; &lt;&gt; &lt;&lt;<span class="gm" style="font-weight: bold; color: #AA00AA">input</span>@<span class="ga" style="color: #00AA00">T(i0,j0)</span>,<span class="gn" style="color: #AA5500">nT</span>(i0,j0)&gt;,<span class="gf" style="font-weight: bold">tag1</span>&gt;)<br><br></span>
</span>

<span class="squirrel-step" id="step96">
<span class="input-line" id="in96"><br>      by project; repeat split; intro &gt; _ _ [[_ Meq] _]; fresh Meq.</span>
<span class="output-line" id="out96">[&gt; Line 226: by (project;<br>                ((repeat split);((intro &gt; _ _ [[_ Meq] _]);(fresh Meq))))<br><br>[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)<br>1: <span class="gn" style="color: #AA5500">nT</span>(i,j)<br>2: <span class="gn" style="color: #AA5500">n_PRF</span><br><br><br></span>
</span>

<span class="squirrel-step" id="step97">
<span class="input-line" id="in97"><br>    }<br>    fresh 2.</span>
<span class="output-line" id="out97">[&gt; Line 228: (fresh 2) <br>[goal&gt; Focused goal (1/1):<br>Systems: left:default/left, right:default/right (same for equivalences)<br>Variables: i,j:index<br>H: [<span class="gm" style="font-weight: bold; color: #AA00AA">happens</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)]<br>IH: equiv(<span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>))<br><span class="sep" style="font-weight: bold">----------------------------------------</span><br>0: <span class="gm" style="font-weight: bold; color: #AA00AA">frame</span>@<span class="gf" style="font-weight: bold">pred</span>(<span class="ga" style="color: #00AA00">T(i,j)</span>)<br>1: <span class="gn" style="color: #AA5500">nT</span>(i,j)<br><br><br></span>
</span>

<span class="squirrel-step" id="step98">
<span class="input-line" id="in98"><br>    by fresh 1; rewrite if_true.</span>
<span class="output-line" id="out98">[&gt; Line 229: by ((fresh 1);(rewrite ...)) <br>[goal&gt; Goal unlinkability is proved <br></span>
</span>

<span class="squirrel-step" id="step99">
<span class="input-line" id="in99"><br>Qed.</span>
<span class="output-line" id="out99">Exiting proof mode.<br><br><br></span>
</span>

</span>
<div class="page-header">
  <img src="logo-circular.png" class="logo">
  <h1 class="project-tagline">Squirrel Prover</h1>
  <a href="https://squirrel-prover.github.io/examples.html" class="header-button">
    <button type="button" class="header-button">Exit</button>
  </a>
  <button type="button" class="header-button" onclick="help()" id="button-panel">Help</button>
</div>

<div class="help-panel" id="help-panel">
  Press the left and right arrows to do and undo an instruction.
  <br><br>
  Alternatively, you can double-click on an instruction.
  <br><br>
  <span style="color: #8B0000;" onmouseenter="highlightOn('in-zone')" onmouseleave="highlightOff('in-zone')">This zone</span> shows a Squirrel file. You can double-click on a comment to collapse it for better readabilility.
  <br><br>
  <span style="color: #8B0000;" onmouseenter="highlightOn('out-zone')" onmouseleave="highlightOff('out-zone')">This zone</span> shows the output given by Squirrel.
  <br><br>
  <span style="color: #8B0000;" onmouseenter="highlightOn('prec-zone')" onmouseleave="highlightOff('prec-zone')">This zone</span> shows the output of the previous instruction, to help identifying the change caused by the instruction.
</div>

<div class="mainsection" id="main">
  <div class="example-grid">
    <div class="example-col example-col-left" id="in-zone">
      <p class="example-code"><span id="in-line"></span></p>
    </div>
    <div class="example-col example-col-right">
      <div class="example-code example-code-right" style="height: 45%;	border-bottom: 4px double #8B0000;" id="prec-zone"><span>Previously:</span><br><br><span id="prec-line"></span>
      </div>
      <div style="position: relative;">
      <button type="button" class="prec-button" onclick="hidePrec()" id="prec-button" >Hide</button>
      </div>
      <div class="example-code example-code-right" style="height: 55%;" id="out-zone"><span id="out-line"></span>
      </div>
    </div>
  </div>
</div>

<script src="script.js"></script>

</body>

